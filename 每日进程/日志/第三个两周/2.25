ä¸æ˜¯çš„ï¼**ä½ å®Œå…¨å¯ä»¥ä¸ä¾èµ– BoxMOTï¼Œè€Œæ˜¯è‡ªå·±å®ç°ä¸€ä¸ªæ›´è½»é‡çº§çš„ç›®æ ‡è·Ÿè¸ªæ–¹æ³•**ï¼Œå°¤å…¶æ˜¯å½“ä½ åªéœ€è¦è·Ÿè¸ª **â‰¤ 4 ä¸ªäºº** æ—¶ï¼ŒBoxMOT å¯èƒ½è¿‡äºå¤æ‚ã€‚ä¸‹é¢æˆ‘ç»™ä½ æä¾›å‡ ç§ **æ›¿ä»£æ–¹æ¡ˆ**ï¼Œä½ å¯ä»¥é€‰æ‹©æœ€é€‚åˆä½ çš„ã€‚

---

## **ğŸš€ æ›¿ä»£ BoxMOT çš„ç›®æ ‡è·Ÿè¸ªæ–¹æ¡ˆ**
| æ–¹æ¡ˆ | è®¡ç®—é‡ | é€‚åˆç›®æ ‡æ•° | ä¾èµ– ReID? | é€‚ç”¨åœºæ™¯ |
|------|--------|----------|------------|---------|
| **BoxMOT (ByteTrack, BoT-SORT, etc.)** | **é«˜** | 4+ | éƒ¨åˆ†éœ€è¦ | é«˜ç²¾åº¦ã€å¤šç›®æ ‡ |
| **è‡ªå·±å®ç° Kalman + IOU è¿½è¸ª** | **ä½** | â‰¤ 4 | âŒ ä¸éœ€è¦ | è½»é‡çº§ç›®æ ‡è·Ÿè¸ª |
| **YOLO + SORT (è½»é‡çº§)** | **ä¸­ç­‰** | 4-10 | âŒ ä¸éœ€è¦ | é€‚ç”¨äºè¿åŠ¨ç‰©ä½“ |
| **YOLO + DeepSORT (å¸¦ ReID)** | **é«˜** | 4+ | âœ… éœ€è¦ | é«˜ç²¾åº¦ã€ç›®æ ‡å¤–è§‚å¯èƒ½å˜åŒ– |
| **YOLO + å¤šç›®æ ‡æ£€æµ‹ + ID å…³è”** | **ä½** | â‰¤ 4 | âŒ ä¸éœ€è¦ | è½»é‡çº§ï¼Œé€‚åˆå°ç›®æ ‡åœºæ™¯ |

---

## **âœ… æ–¹æ¡ˆ 1ï¼šç”¨ Kalman + IOU ç›´æ¥è¿½è¸ª**
**æ€è·¯ï¼š**
1. ç”¨ **YOLOv8** æ£€æµ‹ **çƒå‘˜**ï¼Œè·å–è¾¹ç•Œæ¡†ï¼ˆbboxï¼‰
2. ç”¨ **IOUï¼ˆäº¤å¹¶æ¯”ï¼‰+ Kalman æ»¤æ³¢å™¨** è¿›è¡Œç›®æ ‡è·Ÿè¸ª
3. **ä¸ºæ¯ä¸ªäººèµ‹äºˆ ID**ï¼Œè®©å…¶åœ¨è§†é¢‘å¸§ä¸­ä¿æŒä¸€è‡´

ğŸ“Œ **ä»£ç ï¼ˆYOLO + IOU + Kalmanï¼‰**
```python
from ultralytics import YOLO
import cv2
import numpy as np
from filterpy.kalman import KalmanFilter

# åŠ è½½ YOLO æ¨¡å‹
model = YOLO("yolov8n.pt")

# åˆå§‹åŒ– Kalman æ»¤æ³¢å™¨
def init_kalman():
    kf = KalmanFilter(dim_x=4, dim_z=2)
    kf.F = np.array([[1, 0, 1, 0], [0, 1, 0, 1], [0, 0, 1, 0], [0, 0, 0, 1]])  # é¢„æµ‹æ¨¡å‹
    kf.H = np.array([[1, 0, 0, 0], [0, 1, 0, 0]])  # è§‚æµ‹æ¨¡å‹
    kf.P *= 1000  # åˆå§‹ä¸ç¡®å®šæ€§
    kf.R *= 10  # è§‚æµ‹å™ªå£°
    kf.Q *= 0.01  # è¿‡ç¨‹å™ªå£°
    return kf

# è®¡ç®— IOU
def iou(box1, box2):
    x1, y1, x2, y2 = box1
    x1g, y1g, x2g, y2g = box2
    xi1, yi1, xi2, yi2 = max(x1, x1g), max(y1, y1g), min(x2, x2g), min(y2, y2g)
    inter_area = max(0, xi2 - xi1) * max(0, yi2 - yi1)
    union_area = (x2 - x1) * (y2 - y1) + (x2g - x1g) * (y2g - y1g) - inter_area
    return inter_area / union_area if union_area != 0 else 0

# è¯»å–è§†é¢‘
cap = cv2.VideoCapture("result_6.mp4")
trackers = {}  # å­˜å‚¨ Kalman è¿½è¸ªå™¨

frame_count = 0
while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break
    frame_count += 1

    # è¿è¡Œ YOLO æ£€æµ‹
    results = model(frame)[0]
    detections = [box.xyxy[0] for box in results.boxes if int(box.cls) == 0]

    # å…³è”å·²æœ‰çš„è¿½è¸ªå™¨
    new_trackers = {}
    for det in detections:
        best_match_id = None
        best_iou = 0.0
        for track_id, kf in trackers.items():
            pred_x, pred_y = kf.x[:2]  # é¢„æµ‹ä½ç½®
            pred_box = [pred_x - 20, pred_y - 20, pred_x + 20, pred_y + 20]
            iou_score = iou(det, pred_box)
            if iou_score > best_iou and iou_score > 0.3:
                best_iou = iou_score
                best_match_id = track_id

        if best_match_id is not None:
            new_trackers[best_match_id] = trackers[best_match_id]
            new_trackers[best_match_id].update(np.array([[det[0]], [det[1]]]))
        else:
            new_trackers[len(trackers) + 1] = init_kalman()
            new_trackers[len(trackers) + 1].update(np.array([[det[0]], [det[1]]]))

    trackers = new_trackers

    # ç»˜åˆ¶è¿½è¸ªæ¡†
    for track_id, kf in trackers.items():
        pred_x, pred_y = int(kf.x[0]), int(kf.x[1])
        cv2.circle(frame, (pred_x, pred_y), 5, (0, 255, 0), -1)
        cv2.putText(frame, f"ID {track_id}", (pred_x, pred_y - 10),
                    cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 2)

    cv2.imshow("Tracking", frame)
    if cv2.waitKey(1) & 0xFF == ord("q"):
        break

cap.release()
cv2.destroyAllWindows()
```

---

## **âœ… æ–¹æ¡ˆ 2ï¼šYOLO + SORT**
å¦‚æœä½ ä¸æƒ³æ‰‹å†™ Kalman æ»¤æ³¢å™¨ï¼Œå¯ä»¥ä½¿ç”¨ **SORT**ï¼ˆSimple Online Realtime Trackerï¼‰ã€‚

ğŸ“Œ **å®‰è£… SORT**
```bash
pip install sort-tracker
```

ğŸ“Œ **ä»£ç **
```python
from ultralytics import YOLO
import cv2
from sort import Sort

# åŠ è½½ YOLO å’Œ SORT è¿½è¸ªå™¨
model = YOLO("yolov8n.pt")
tracker = Sort()

cap = cv2.VideoCapture("result_6.mp4")

while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break

    results = model(frame)[0]
    detections = [[*box.xyxy[0], box.conf[0]] for box in results.boxes if int(box.cls) == 0]

    # è¿›è¡Œç›®æ ‡è¿½è¸ª
    tracks = tracker.update(detections)

    # ç»˜åˆ¶è¿½è¸ªæ¡†
    for track in tracks:
        x1, y1, x2, y2, track_id = map(int, track)
        cv2.rectangle(frame, (x1, y1), (x2, y2), (255, 0, 0), 2)
        cv2.putText(frame, f"ID {track_id}", (x1, y1 - 10),
                    cv2.FONT_HERSHEY_SIMPLEX, 0.5, (255, 0, 0), 2)

    cv2.imshow("Tracking", frame)
    if cv2.waitKey(1) & 0xFF == ord("q"):
        break

cap.release()
cv2.destroyAllWindows()
```

---

## **ğŸ“Œ ç»“è®º**
- âœ… **BoxMOT ä¸æ˜¯å”¯ä¸€é€‰æ‹©ï¼Œä½ å¯ä»¥è‡ªå·±å®ç°æ›´è½»é‡çš„è¿½è¸ªæ–¹æ³•**
- âœ… **Kalman æ»¤æ³¢ + IOU å¯ä»¥ç›´æ¥å®ç° 4 äººä»¥å†…çš„è·Ÿè¸ª**
- âœ… **ä½¿ç”¨ `YOLO + SORT` ä¹Ÿæ˜¯ä¸€ä¸ªè½»é‡çº§æ–¹æ¡ˆ**
- âœ… **å¦‚æœä½ éœ€è¦é«˜ç²¾åº¦ï¼Œå¯ä»¥è€ƒè™‘ `ByteTrack` ä½†ä¸ä¸€å®šéœ€è¦ BoxMOT**

---

### **ğŸš€ æ¨èï¼š**
1. **å¦‚æœä½ åªè·Ÿè¸ª â‰¤4 äººï¼Œä½¿ç”¨ `YOLO + Kalman + IOU`**ï¼ˆæœ€è½»é‡çº§ï¼‰
2. **å¦‚æœä½ æƒ³çœäº‹ï¼Œç›´æ¥ç”¨ `YOLO + SORT`**
3. **å¦‚æœä½ éœ€è¦ BoxMOTï¼Œå¯ä»¥ç”¨ `ByteTrack` ä»£æ›¿ `BoT-SORT` ä»¥æé«˜æ•ˆç‡**

**ğŸ”¥ ä½ å¯ä»¥å…ˆå°è¯• `YOLO + SORT`ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•ï¼** ğŸš€
