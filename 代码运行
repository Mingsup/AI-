export CUDA_VISIBLE_DEVICES=0
export OMP_NUM_THREADS=1
export MKL_NUM_THREADS=1

(●'◡'●)boxMot：人物id跟踪

创建虚拟环境（方法一）
poetry env use python3
source $(poetry env info --path)/bin/activate

cd boxmot
源代码运行：
python tracking/track.py --yolo-model yolov8n --tracking-method botsort --source ~/yolo/6.mp4 --save
自编代码运行：
python tracking/track_test.py --yolo-model yolov8n --tracking-method botsort --source ~/yolo/6.mp4 --save

id筛查
python id.py shiyan_track.json 1   （json文件名）（id编号）


(●'◡'●)rife:插帧
python inference_video.py --video input.mp4 --output result.mp4 --exp 1 
代表2倍


(●'◡'●)yolo：人物判定
cd yolo
python detect_shots.py  人物击球判定
python slowmotion.py    击球慢动作回放



(●'◡'●)mmpose运行
源代码运行：
python demo/topdown_demo_with_mmdet.py \
    demo/mmdetection_cfg/rtmdet_m_640-8xb32_coco-person.py \
    checkpoints/rtmdet_m_8xb32-100e_coco-obj365-person-235e8209.pth \
    configs/wholebody_2d_keypoint/topdown_heatmap/coco-wholebody/td-hm_hrnet-w48_dark-8xb32-210e_coco-wholebody-384x288.py \
    checkpoints/hrnet_w48_coco_wholebody_384x288_dark-f5726563_20200918.pth \
    --input ~/yolo/6.mp4 \
    --output-root vis_results/ \
    --device cuda:0

自编代码运行：
python demo/topdown_demo_with_mmdet_test.py \
    configs/wholebody_2d_keypoint/topdown_heatmap/coco-wholebody/td-hm_hrnet-w48_dark-8xb32-210e_coco-wholebody-384x288.py \
    checkpoints/hrnet_w48_coco_wholebody_384x288_dark-f5726563_20200918.pth \
    --input ~/yolo/6.mp4 \
    --tracking-results ~/boxmot/tracking_results.json \
    --output-root vis_results/ \
    --device cuda:0

384×288， 全身128点检测

python demo/body3d_pose_lifter_demo_test.py \
configs/wholebody_2d_keypoint/topdown_heatmap/coco-wholebody/td-hm_hrnet-w48_dark-8xb32-210e_coco-wholebody-384x288.py \
checkpoints/hrnet_w48_coco_wholebody_384x288_dark-f5726563_20200918.pth \
configs/wholebody_2d_keypoint/topdown_heatmap/coco-wholebody/td-hm_hrnet-w48_dark-8xb32-210e_coco-wholebody-384x288.py \
checkpoints/hrnet_w48_coco_wholebody_384x288_dark-f5726563_20200918.pth \
configs/body_3d_keypoint/video_pose_lift/h36m/video-pose-lift_tcn-1frm-supv-cpn-ft_8xb128-160e_h36m.py \
checkpoints/videopose_h36m_243frames_fullconv_supervised-880bea25_20210527.pth \
--input ~/yolo/6.mp4 \
--bbox-json ~/yolo/detection_results.json \
--output-root vis_results_3d/ \
--device cuda:0

身体节点检测

python demo/body3d_pose_lifter_demo_test.py \
configs/body_2d_keypoint/topdown_heatmap/coco/td-hm_hrnet-w48_8xb32-210e_coco-256x192.py \
checkpoints/hrnet_w48_coco_256x192-b9e0b3ab_20200708.pth \
configs/body_2d_keypoint/topdown_heatmap/coco/td-hm_hrnet-w48_8xb32-210e_coco-256x192.py \
checkpoints/hrnet_w48_coco_256x192-b9e0b3ab_20200708.pth \
configs/body_3d_keypoint/video_pose_lift/h36m/video-pose-lift_tcn-1frm-supv-cpn-ft_8xb128-160e_h36m.py \
checkpoints/videopose_h36m_243frames_fullconv_supervised-880bea25_20210527.pth \
--input ~/yolo/6.mp4 \
--bbox-json ~/yolo/detection_results.json \
--output-root vis_results_3d/ \
--device cuda:0

单一目标检测（best）

python demo/body3d_pose_lifter_demo_test.py \
configs/body_2d_keypoint/topdown_heatmap/coco/td-hm_hrnet-w48_8xb32-210e_coco-256x192.py \
checkpoints/hrnet_w48_coco_256x192-b9e0b3ab_20200708.pth \
configs/body_2d_keypoint/topdown_heatmap/coco/td-hm_hrnet-w48_8xb32-210e_coco-256x192.py \
checkpoints/hrnet_w48_coco_256x192-b9e0b3ab_20200708.pth \
configs/body_3d_keypoint/video_pose_lift/h36m/video-pose-lift_tcn-243frm-supv_8xb128-160e_h36m.py \
checkpoints/videopose_h36m_243frames_fullconv_supervised-880bea25_20210527.pth \
--input ~/2.mp4 \
--bbox-json ~/boxmot/idresults.json \
--output-root vis_results_201/ \
--device cuda:0

无法判断人物bbox时
python demo/body3d_pose_lifter_demo.py  \
demo/mmdetection_cfg/rtmdet_m_640-8xb32_coco-person.py \
https://download.openmmlab.com/mmpose/v1/projects/rtmpose/rtmdet_m_8xb32-100e_coco-obj365-person-235e8209.pth \
configs/body_2d_keypoint/rtmpose/body8/rtmpose-m_8xb256-420e_body8-256x192.py \
https://download.openmmlab.com/mmpose/v1/projects/rtmposev1/rtmpose-m_simcc-body7_pt-body7_420e-256x192-e48f03d0_20230504.pth \
configs/body_3d_keypoint/video_pose_lift/h36m/video-pose-lift_tcn-243frm-supv-cpn-ft_8xb128-200e_h36m.py \
https://download.openmmlab.com/mmpose/body3d/videopose/videopose_h36m_243frames_fullconv_supervised_cpn_ft-88f5abbb_20210527.pth  \
--input ~/2.mp4 \
--output-root  vis_results_201 \
--save-predictions

-----------------------------------------------------------------------------------

目标1
python demo/body3d_pose_lifter_demo_test.py \
demo/mmdetection_cfg/rtmdet_m_640-8xb32_coco-person.py \
https://download.openmmlab.com/mmpose/v1/projects/rtmpose/rtmdet_m_8xb32-100e_coco-obj365-person-235e8209.pth \
configs/body_2d_keypoint/rtmpose/coco/rtmpose-l_8xb256-420e_aic-coco-384x288.py \
checkpoints/rtmpose-l_simcc-aic-coco_pt-aic-coco_420e-384x288-97d6cb0f_20230228.pth \
configs/body_3d_keypoint/video_pose_lift/h36m/video-pose-lift_tcn-243frm-supv-cpn-ft_8xb128-200e_h36m.py \
https://download.openmmlab.com/mmpose/body3d/videopose/videopose_h36m_243frames_fullconv_supervised_cpn_ft-88f5abbb_20210527.pth \
--input ~/rife/6new_120.mp4 \
--bbox-json ~/boxmot/idresults.json \
--output-root vis_results_3d/ \
--save-predictions


目标2
python demo/body3d_pose_lifter_demo_test.py \
demo/mmdetection_cfg/rtmdet_m_640-8xb32_coco-person.py \
https://download.openmmlab.com/mmpose/v1/projects/rtmpose/rtmdet_m_8xb32-100e_coco-obj365-person-235e8209.pth \
configs/body_2d_keypoint/rtmpose/coco/rtmpose-l_8xb256-420e_aic-coco-384x288.py \
checkpoints/rtmpose-l_simcc-aic-coco_pt-aic-coco_420e-384x288-97d6cb0f_20230228.pth \
configs/body_3d_keypoint/video_pose_lift/h36m/video-pose-lift_tcn-243frm-supv-cpn-ft_8xb128-200e_h36m.py \
https://download.openmmlab.com/mmpose/body3d/videopose/videopose_h36m_243frames_fullconv_supervised_cpn_ft-88f5abbb_20210527.pth \
--input ~/rife/6new_120.mp4 \
--bbox-json ~/boxmot/idresults2.json \
--output-root vis_results_3dnew/ \
--save-predictions

newjson.py修改json数据达到归一化的效果
python newjson.py --input vis_results_102_2/results_102.json --output vis_results_102_2/102.json


python demo/body3d_pose_lifter_demo_test.py \
demo/mmdetection_cfg/rtmdet_m_640-8xb32_coco-person.py \
https://download.openmmlab.com/mmpose/v1/projects/rtmpose/rtmdet_m_8xb32-100e_coco-obj365-person-235e8209.pth \
configs/body_2d_keypoint/rtmpose/coco/rtmpose-l_8xb256-420e_aic-coco-384x288.py \
checkpoints/rtmpose-l_simcc-aic-coco_pt-aic-coco_420e-384x288-97d6cb0f_20230228.pth \
configs/body_3d_keypoint/video_pose_lift/h36m/video-pose-lift_tcn-243frm-supv-cpn-ft_8xb128-200e_h36m.py \
https://download.openmmlab.com/mmpose/body3d/videopose/videopose_h36m_243frames_fullconv_supervised_cpn_ft-88f5abbb_20210527.pth \
--input ~/4.mp4 \
--bbox-json ~/boxmot/400_track_filtered.json \
--output-root vis_results_400/ \
--save-predictions

python frame.py --json_path vis/2.json \
       --start_frames 369 1106 1255 1468 1717 1918 2160 2354 2585 2790 3540 3720 3917 4808 5016 \
       --clip_length 120 \
       --output_dir 2result





